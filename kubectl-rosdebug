# cat /usr/local/bin/kubectl-rosdebug
#!/bin/bash
# Installation: copy it to /usr/local/bin/ or any other folder in your $PATH
# Usage: kubectl rosdebug kube-system

#ktoryimage="infoblox/dnstools:latest"
ktoryimage="ubuntu:18.04"

while [[ $# -gt 0 ]]
do
    flag="$1"
    case "${flag}" in
        -n)
        ns="$2"
        shift
        shift
        ;;
        -t)
        targetpod="$2"
        shift
        shift
        ;;
        *)
        echo "Uzycie: kubectl rosdebug -n <namespace> -t <target_pod>"
        exit 0
  esac
done

echo "Podpinam pod debugowy do poda $targetpod w namespace $ns"
/usr/local/bin/kubectl run -it --rm --restart=Never --image=$ktoryimage rosdebug -n $ns
# --target=$targetpod
